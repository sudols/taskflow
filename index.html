<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link
			rel="icon"
			type="image/png"
			href="./assets/favicon/favicon-96x96.png"
			sizes="96x96"
		/>
		<link rel="icon" type="image/svg+xml" href="./assets/favicon/favicon.svg" />
		<link rel="shortcut icon" href="./assets/favicon/favicon.ico" />
		<link
			rel="apple-touch-icon"
			sizes="180x180"
			href="./assets/favicon/apple-touch-icon.png"
		/>
		<link rel="manifest" href="./assets/favicon/site.webmanifest" />
		<link
			rel="stylesheet"
			href="https://cdn.jsdelivr.net/npm/@tabler/icons-webfont@latest/tabler-icons.min.css"
		/>
		<!-- Flatpickr CSS -->
		<!-- <link
			rel="stylesheet"
			href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css"
		/> -->
		<!-- <script src="https://cdn.jsdelivr.net/npm/flatpickr" defer></script> -->
		<title>TaskFlow</title>
	</head>
	<body class="bg-main-bg text-body">
		<main
			class="h-screen grid grid-cols-2 grid-rows-[60px_50px_1fr] mt-5 ml-5 mr-5"
		>
			<div class="col-span-2">
				<form action="#">
					<div class="relative">
						<input
							type="search"
							name="card-search"
							id="card-search"
							class="appearance-none outline-none rounded-md bg-header-search-bg focus:text-active-menu text-inactive-menu pl-8 pt-2 pb-2 pr-20 text-sm border-gray-600 border-1"
							placeholder="Search tasks"
						/>
						<div
							class="absolute left-2 top-0 flex items-center justify-center h-full text-base"
						>
							<i class="ti ti-search text-grey-200"></i>
						</div>
					</div>
				</form>
			</div>
			<div class="row-start-2 flex items-center">
				<!-- my tasks heading -->
				<div>
					<p class="text-heading text-2xl font-bold">My Tasks</p>
				</div>
			</div>
			<div class="row-start-2 justify-self-end flex gap-3 items-center">
				<button
					type="button"
					class="hover:cursor-pointer bg-btn-bg text-btn-text pt-1.5 pb-1.5 pr-3 pl-3 rounded-md hover:bg-btn-focus font-bold text-sm newTaskButton"
				>
					New Task
				</button>
				<button
					type="button"
					class="hover:cursor-pointer bg-sort-btn-bg pt-1.5 pb-1.5 pr-3 pl-3 rounded-md text-btn-text font-bold text-sm sortTaskButton"
				>
					Sort & Filter
				</button>
				<!-- buttons -->
			</div>
			<div class="col-span-2 cardDisplayContainer flex flex-col gap-2">
				<!-- task card -->
			</div>
		</main>

		<!-- Flatpickr JavaScript -->

		<!-- <script>
			// Initialize datetime picker
			document.addEventListener('DOMContentLoaded', function () {
				// Function to format date for display
				function formatDateDisplay(date) {
					if (!date) return 'No due date';

					const today = new Date();
					const tomorrow = new Date(today);
					tomorrow.setDate(tomorrow.getDate() + 1);

					const taskDate = new Date(date);

					if (taskDate.toDateString() === today.toDateString()) {
						return 'Today';
					} else if (taskDate.toDateString() === tomorrow.toDateString()) {
						return 'Tomorrow';
					} else {
						return (
							taskDate.toLocaleDateString() +
							' ' +
							taskDate.toLocaleTimeString([], {
								hour: '2-digit',
								minute: '2-digit',
							})
						);
					}
				}

				// Event delegation for due date triggers
				document.addEventListener('click', function (e) {
					if (e.target.matches('.due-date-trigger')) {
						const noteId = e.target.dataset.noteId;
						const currentDateText = e.target.textContent.trim();

						// Convert display text back to date if needed
						let currentDate = new Date();
						if (currentDateText === 'Tomorrow') {
							currentDate.setDate(currentDate.getDate() + 1);
						}

						// Create flatpickr instance
						const fp = flatpickr(e.target, {
							enableTime: true,
							dateFormat: 'Y-m-d H:i',
							defaultDate: currentDate,
							time_24hr: false,
							minuteIncrement: 15,
							onChange: function (selectedDates, dateStr, instance) {
								if (selectedDates.length > 0) {
									const formattedDisplay = formatDateDisplay(selectedDates[0]);

									// Update all triggers for this note
									document
										.querySelectorAll(`[data-note-id="${noteId}"]`)
										.forEach((trigger) => {
											if (trigger.tagName === 'SPAN') {
												trigger.textContent = formattedDisplay;
											}
										});

									// Here you would update your Note object
									console.log(`Note ${noteId} due date updated to:`, dateStr);
									// Example: Note.getNoteData(noteId).updateNote({dueDate: dateStr});
								}
							},
							onClose: function (selectedDates, dateStr, instance) {
								// Clean up the flatpickr instance
								instance.destroy();
							},
						});

						// Open the picker
						fp.open();
					}
				});
			});
		</script> -->
	</body>
</html>
